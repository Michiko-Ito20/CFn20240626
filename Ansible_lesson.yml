- name: Manage CloudFormation stack
  hosts: localhost
  tasks:
    - name: Create or update CloudFormation stack for VPC
      amazon.aws.cloudformation:
        stack_name: "Ansible-CFnVPCtest2406"  # スタック名
        state: present
        template_body: "{{ lookup('file', 'VPCtest2406.yml') }}" # VPCのCFnテンプレート
        region: "ap-northeast-1"
        parameters: {}  # 空の辞書を渡す

    - name: Create or update CloudFormation stack for EC2, ALB, SG
      amazon.aws.cloudformation:
        stack_name: "Ansible-CFnEC2-ALB-SG2406"  # スタック名
        state: present
        template_body: "{{ lookup('file', 'EC2_ALB_SG2406.yml') }}" # EC2、ALB、SGのCFnテンプレート
        region: "ap-northeast-1"
        parameters: {}  # 空の辞書を渡す

    - name: Create or update CloudFormation stack for RDS
      amazon.aws.cloudformation:
        stack_name: "Ansible-CFnRDS2406"  # スタック名
        state: present
        template_body: "{{ lookup('file', 'RDStest2406.yml') }}" # RDSのCFnテンプレート
        region: "ap-northeast-1"
        parameters: {}  # 空の辞書を渡す

